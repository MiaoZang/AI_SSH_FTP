import{a as s}from"./index-B9ygI19o.js";const t=s.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e));t.interceptors.response.use(e=>{const r=e.data;if(r&&typeof r=="object"&&r.success===!1){const a=new Error(r.message||"请求失败");return Promise.reject(a)}return r},e=>(console.error("API Error:",e.response?.data||e.message),e.response?.status===401&&(localStorage.removeItem("token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(e)));const n={getCards:()=>t.get("/cards"),getCard:e=>t.get(`/cards/${e}`),createCard:(e={})=>t.post("/cards",e),getBalance:e=>t.get(`/cards/${e}/balance`),recharge:(e,r)=>t.post(`/cards/${e}/recharge`,r),updateStatus:(e,r)=>t.patch(`/cards/${e}/status`,{status:r}),cancelCard:e=>t.delete(`/cards/${e}`),getTransactions:e=>t.get(`/cards/${e}/transactions`)};export{t as a,n as c};
