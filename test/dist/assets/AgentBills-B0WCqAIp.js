import{a as D}from"./agentApi-CTrSVxho.js";import{d as A,k as y,J as h,o as E,a as F,e,w as l,E as U,g as o,l as j,h as z,b as i,i as d,m as M,j as I,t as u,x as J,_ as L}from"./index-x4DXS2Vx.js";import"./index-B9ygI19o.js";const P={class:"agent-bills"},T={class:"pagination-container"},q=A({__name:"AgentBills",setup(G){const _=y(!1),m=y([]),n=h({page:1,pageSize:20,total:0}),r=h({type:""});async function p(){_.value=!0;try{const s={page:n.page,pageSize:n.pageSize};r.type&&(s.type=r.type);const a=await D.get("/agent/bills",{params:s});m.value=a.data.data,n.total=a.data.pagination.total}catch(s){U.error(s.response?.data?.error||"获取账单失败")}finally{_.value=!1}}function C(){r.type="",n.page=1,p()}function x(s){return s?new Date(s).toLocaleString("zh-CN"):"-"}return E(()=>{p()}),(s,a)=>{const g=o("el-card"),f=o("el-option"),S=o("el-select"),b=o("el-form-item"),v=o("el-button"),w=o("el-form"),B=o("el-tag"),c=o("el-table-column"),k=o("el-table"),N=o("el-pagination"),V=j("loading");return z(),F("div",P,[e(g,{class:"page-header"},{default:l(()=>[...a[3]||(a[3]=[i("div",{class:"header-content"},[i("div",{class:"title-section"},[i("h2",null,"账单记录"),i("span",{class:"subtitle"},"查看充值和扣款记录")])],-1)])]),_:1}),e(g,{class:"filter-card"},{default:l(()=>[e(w,{inline:!0,model:r,class:"filter-form"},{default:l(()=>[e(b,{label:"类型"},{default:l(()=>[e(S,{modelValue:r.type,"onUpdate:modelValue":a[0]||(a[0]=t=>r.type=t),placeholder:"全部",clearable:""},{default:l(()=>[e(f,{label:"充值",value:"recharge"}),e(f,{label:"扣款",value:"deduct"})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(v,{type:"primary",onClick:p},{default:l(()=>[...a[4]||(a[4]=[d("搜索",-1)])]),_:1}),e(v,{onClick:C},{default:l(()=>[...a[5]||(a[5]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(g,{class:"table-card"},{default:l(()=>[M((z(),I(k,{data:m.value,stripe:""},{default:l(()=>[e(c,{label:"类型",width:"100"},{default:l(({row:t})=>[e(B,{type:t.type==="recharge"?"success":"danger"},{default:l(()=>[d(u(t.type==="recharge"?"充值":"扣款"),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"金额",width:"150"},{default:l(({row:t})=>[i("span",{class:J(t.type==="recharge"?"amount-positive":"amount-negative")},u(t.type==="recharge"?"+":"")+"¥"+u(Number(t.amount).toFixed(2)),3)]),_:1}),e(c,{label:"余额",width:"150"},{default:l(({row:t})=>[d(" ¥"+u(Number(t.balance).toFixed(2)),1)]),_:1}),e(c,{prop:"description",label:"说明","min-width":"200"}),e(c,{label:"时间",width:"180"},{default:l(({row:t})=>[d(u(x(t.createdAt)),1)]),_:1})]),_:1},8,["data"])),[[V,_.value]]),i("div",T,[e(N,{"current-page":n.page,"onUpdate:currentPage":a[1]||(a[1]=t=>n.page=t),"page-size":n.pageSize,"onUpdate:pageSize":a[2]||(a[2]=t=>n.pageSize=t),"page-sizes":[10,20,50,100],total:n.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])])]),_:1})])}}}),Q=L(q,[["__scopeId","data-v-217d9024"]]);export{Q as default};
