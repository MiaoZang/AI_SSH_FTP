import{d as F,k as p,c as G,o as H,a as Q,b as r,e as a,w as t,B as X,g as n,h as Y,i as d,E as i,q as ee,C as ae,_ as te}from"./index-x4DXS2Vx.js";const le={class:"settings-page"},oe={class:"card-header"},ne={class:"path-input-group"},se={class:"card-header"},ie={class:"card-header"},de=F({__name:"Settings",setup(re){const k={baseUrl:"http://wwb.52heisi1.shop/api",endpoints:{openCard:"/v1/cards/open",recharge:"/v1/cards/recharge",cancel:"/v1/cards/cancel",activate:"/v1/card-keys/activate"}},s=p({...k}),P=p(!1),w=p(""),c=p(""),V=p(!1),g=p(!0),_=p(!1),y=p(!1),b=p(!1),j=G(()=>`${window.location.origin}${w.value}`),B=async()=>{const l=localStorage.getItem("api_config");if(l)try{s.value=JSON.parse(l)}catch{s.value={...k}}w.value=X(),c.value=w.value,await M()},M=async()=>{_.value=!0;try{const e=await(await fetch("/api/v1/card-pool/config")).json();e.code===200&&e.data&&(g.value=e.data.excludeLongTermCards!==!1);const m=await(await fetch("/api/v1/card-pool/activation-status")).json();m.code===200&&m.data&&(y.value=m.data.activationMaintenance,b.value=m.data.baiPiaoUseSelfCreated)}catch(l){console.error("Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆÂ§±Ë¥•:",l)}finally{_.value=!1}},N=async()=>{try{const e=await(await fetch("/api/v1/card-pool/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"excludeLongTermCards",value:g.value?"true":"false"})})).json();e.code===200?i.success(`Â∑≤${g.value?"ÂºÄÂêØ":"ÂÖ≥Èó≠"}ÊéíÈô§ÈïøÊúüÂç°`):i.error("‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•: "+e.message)}catch(l){i.error("‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•: "+l.message)}},$=async()=>{try{const e=await(await fetch("/api/v1/card-pool/config/activation-maintenance",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:y.value})})).json();e.code===200?i.success(y.value?"ÊøÄÊ¥ªÁª¥Êä§Â∑≤ÂºÄÂêØÔºåÂØπÂ§ñÊøÄÊ¥ªÈ°µÈù¢Â∞ÜÊòæÁ§∫Áª¥Êä§ÊèêÁ§∫":"ÊøÄÊ¥ªÁª¥Êä§Â∑≤ÂÖ≥Èó≠"):i.error("‰øùÂ≠òÂ§±Ë¥•: "+e.message)}catch(l){i.error("‰øùÂ≠òÂ§±Ë¥•: "+l.message)}},I=async()=>{try{const e=await(await fetch("/api/v1/card-pool/config/baiPiao-use-selfCreated",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:b.value})})).json();e.code===200?i.success(b.value?"ÁôΩÂ´ñËΩ¨Ëá™ÂºÄÂ∑≤ÂºÄÂêØÔºåAAA0Âç°ÂØÜÂ∞Ü‰ªéËá™ÂºÄÂç°Ê±†ÂèñÂç°":"ÁôΩÂ´ñËΩ¨Ëá™ÂºÄÂ∑≤ÂÖ≥Èó≠"):i.error("‰øùÂ≠òÂ§±Ë¥•: "+e.message)}catch(l){i.error("‰øùÂ≠òÂ§±Ë¥•: "+l.message)}},R=async()=>{P.value=!0;try{localStorage.setItem("api_config",JSON.stringify(s.value)),i.success("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò")}finally{P.value=!1}},E=()=>{s.value={...k},localStorage.removeItem("api_config"),i.info("Â∑≤ÊÅ¢Â§çÈªòËÆ§ÈÖçÁΩÆ")},J=async()=>{if(!c.value||c.value===w.value){i.warning("ËØ∑ËæìÂÖ•Êñ∞ÁöÑÂêéÂè∞Ë∑ØÂæÑ");return}const l=c.value.startsWith("/")?c.value:`/${c.value}`;if(!/^\/[a-zA-Z0-9_-]+$/.test(l)){i.error("Ë∑ØÂæÑÊ†ºÂºèÊó†ÊïàÔºåÂè™ËÉΩÂåÖÂê´Â≠óÊØç„ÄÅÊï∞Â≠ó„ÄÅ‰∏ãÂàíÁ∫øÂíåËøûÂ≠óÁ¨¶");return}try{await ee.confirm(`Á°ÆÂÆöË¶ÅÂ∞ÜÂêéÂè∞ËÆøÈóÆË∑ØÂæÑ‰øÆÊîπ‰∏∫ "${l}" ÂêóÔºü

‰øÆÊîπÂêéÂ∞ÜËá™Âä®Ë∑≥ËΩ¨Âà∞Êñ∞ÁöÑÁôªÂΩïÈ°µÈù¢„ÄÇ`,"‰øÆÊîπÂêéÂè∞Ë∑ØÂæÑ",{confirmButtonText:"Á°ÆÂÆö‰øÆÊîπ",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),V.value=!0,ae(l)}catch{}},O=async()=>{try{await navigator.clipboard.writeText(j.value),i.success("ÂêéÂè∞Âú∞ÂùÄÂ∑≤Â§çÂà∂")}catch{i.error("Â§çÂà∂Â§±Ë¥•")}},q=()=>{const l="abcdefghijklmnopqrstuvwxyz0123456789";let e="/admin-";for(let f=0;f<8;f++)e+=l.charAt(Math.floor(Math.random()*l.length));c.value=e};return H(()=>{B()}),(l,e)=>{const f=n("el-tag"),m=n("el-alert"),L=n("Link"),C=n("el-icon"),x=n("el-button"),v=n("el-input"),u=n("el-form-item"),K=n("Key"),h=n("el-form"),U=n("el-card"),S=n("el-switch"),T=n("el-text"),W=n("el-divider"),A=n("el-col"),z=n("el-row"),Z=n("Check"),D=n("RefreshLeft");return Y(),Q("div",le,[e[26]||(e[26]=r("div",{class:"page-header"},[r("h1",null,"Á≥ªÁªüËÆæÁΩÆ"),r("p",null,"ÈÖçÁΩÆÁ≥ªÁªüÂèÇÊï∞ÂíåÂÆâÂÖ®ËÆæÁΩÆ")],-1)),a(U,{class:"settings-card security-card"},{header:t(()=>[r("div",oe,[e[10]||(e[10]=r("span",null,"üîí ÂêéÂè∞ÂÆâÂÖ®ËÆæÁΩÆ",-1)),a(f,{type:"warning",size:"small"},{default:t(()=>[...e[9]||(e[9]=[d("ÈáçË¶Å",-1)])]),_:1})])]),default:t(()=>[a(m,{title:"ÂÆâÂÖ®ÊèêÁ§∫",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:t(()=>[...e[11]||(e[11]=[d(" ÈªòËÆ§ÂüüÂêçÊ†πË∑ØÂæÑ‰ºöÊòæÁ§∫ 404 È°µÈù¢ÔºåËØ∑‰ΩøÁî®‰∏ãÊñπÁöÑÈöêËóèË∑ØÂæÑËÆøÈóÆÂêéÂè∞„ÄÇ ",-1)])]),_:1}),a(h,{"label-position":"top"},{default:t(()=>[a(u,{label:"ÂΩìÂâçÂêéÂè∞ËÆøÈóÆÂú∞ÂùÄ"},{default:t(()=>[a(v,{"model-value":j.value,readonly:""},{prefix:t(()=>[a(C,null,{default:t(()=>[a(L)]),_:1})]),append:t(()=>[a(x,{onClick:O},{default:t(()=>[...e[12]||(e[12]=[d("Â§çÂà∂",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),a(u,{label:"‰øÆÊîπÂêéÂè∞Ë∑ØÂæÑ"},{default:t(()=>[r("div",ne,[a(v,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),placeholder:"/your-secret-path",disabled:V.value},{prefix:t(()=>[a(C,null,{default:t(()=>[a(K)]),_:1})]),_:1},8,["modelValue","disabled"]),a(x,{onClick:q,disabled:V.value},{default:t(()=>[...e[13]||(e[13]=[d(" ÈöèÊú∫ÁîüÊàê ",-1)])]),_:1},8,["disabled"]),a(x,{type:"primary",onClick:J,loading:V.value},{default:t(()=>[...e[14]||(e[14]=[d(" Â∫îÁî®‰øÆÊîπ ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1}),a(U,{class:"settings-card"},{header:t(()=>[...e[15]||(e[15]=[r("div",{class:"card-header"},[r("span",null,"üí≥ Âç°Ê±†ÈÖçÁΩÆ")],-1)])]),default:t(()=>[a(h,{"label-position":"top"},{default:t(()=>[a(u,{label:"ÂèñÂç°ÊéíÈô§ÈïøÊúüÂç°"},{default:t(()=>[a(S,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),"active-text":"ÂºÄÂêØ","inactive-text":"ÂÖ≥Èó≠",loading:_.value,onChange:N},null,8,["modelValue","loading"]),a(T,{type:"info",style:{"margin-left":"16px","font-size":"12px"}},{default:t(()=>[...e[16]||(e[16]=[d(' ÂºÄÂêØÂêéÔºåÊøÄÊ¥ªÊó∂Â∞ÜËá™Âä®ÊéíÈô§Ââ©‰ΩôÊó∂Èó¥‰∏∫"ÈïøÊúü"ÁöÑÂç°Áâá ',-1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(U,{class:"settings-card activation-card"},{header:t(()=>[r("div",se,[e[18]||(e[18]=r("span",null,"üîß ÊøÄÊ¥ªÊéßÂà∂",-1)),a(f,{type:"danger",size:"small"},{default:t(()=>[...e[17]||(e[17]=[d("Áª¥Êä§ÂäüËÉΩ",-1)])]),_:1})])]),default:t(()=>[a(h,{"label-position":"top"},{default:t(()=>[a(u,{label:"ÊøÄÊ¥ªÊòØÂê¶Áª¥Êä§"},{default:t(()=>[a(S,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),"active-text":"Áª¥Êä§‰∏≠","inactive-text":"Ê≠£Â∏∏","active-color":"#f56c6c",loading:_.value,onChange:$},null,8,["modelValue","loading"]),a(T,{type:"warning",style:{"margin-left":"16px","font-size":"12px"}},{default:t(()=>[...e[19]||(e[19]=[d(" ÂºÄÂêØÂêéÔºåÂØπÂ§ñÊøÄÊ¥ªÈ°µÈù¢Â∞ÜÊòæÁ§∫Áª¥Êä§ÊèêÁ§∫ÔºåÁ¶ÅÊ≠¢Êñ∞ÁöÑÊøÄÊ¥ªÊìç‰Ωú ",-1)])]),_:1})]),_:1}),a(u,{label:"ÁôΩÂ´ñ‰∏¥Êó∂ËΩ¨Ëá™ÂºÄ"},{default:t(()=>[a(S,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),"active-text":"ÂºÄÂêØ","inactive-text":"ÂÖ≥Èó≠","active-color":"#e6a23c",loading:_.value,onChange:I},null,8,["modelValue","loading"]),a(T,{type:"info",style:{"margin-left":"16px","font-size":"12px"}},{default:t(()=>[...e[20]||(e[20]=[d(" ÂºÄÂêØÂêéÔºåAAA0 Âç°ÂØÜÂ§¥Ôºà$0ÂàÄÁôΩÂ´ñÂç°ÔºâÊøÄÊ¥ªÊó∂Â∞Ü‰ªéËá™ÂºÄÂç°Ê±†ÂèñÂç° ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(U,{class:"settings-card"},{header:t(()=>[r("div",ie,[e[22]||(e[22]=r("span",null,"API ÈÖçÁΩÆ",-1)),a(f,{type:"info",size:"small"},{default:t(()=>[...e[21]||(e[21]=[d("È¢ÑÁïôÂäüËÉΩ",-1)])]),_:1})])]),default:t(()=>[a(h,{"label-position":"top",model:s.value},{default:t(()=>[a(u,{label:"API Âü∫Á°ÄÂú∞ÂùÄ"},{default:t(()=>[a(v,{modelValue:s.value.baseUrl,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.baseUrl=o),placeholder:"http://example.com/api"},{prefix:t(()=>[a(C,null,{default:t(()=>[a(L)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(W,{"content-position":"left"},{default:t(()=>[...e[23]||(e[23]=[d("Êé•Âè£Ë∑ØÂæÑÈÖçÁΩÆ",-1)])]),_:1}),a(z,{gutter:20},{default:t(()=>[a(A,{span:12},{default:t(()=>[a(u,{label:"ÂºÄÂç°Êé•Âè£"},{default:t(()=>[a(v,{modelValue:s.value.endpoints.openCard,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.endpoints.openCard=o),placeholder:"/v1/cards/open"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,{span:12},{default:t(()=>[a(u,{label:"ÂÖÖÂÄºÊé•Âè£"},{default:t(()=>[a(v,{modelValue:s.value.endpoints.recharge,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.endpoints.recharge=o),placeholder:"/v1/cards/recharge"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(z,{gutter:20},{default:t(()=>[a(A,{span:12},{default:t(()=>[a(u,{label:"Ê≥®ÈîÄÊé•Âè£"},{default:t(()=>[a(v,{modelValue:s.value.endpoints.cancel,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.endpoints.cancel=o),placeholder:"/v1/cards/cancel"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,{span:12},{default:t(()=>[a(u,{label:"ÊøÄÊ¥ªÊé•Âè£"},{default:t(()=>[a(v,{modelValue:s.value.endpoints.activate,"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.endpoints.activate=o),placeholder:"/v1/card-keys/activate"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(u,{class:"form-actions"},{default:t(()=>[a(x,{type:"primary",loading:P.value,onClick:R},{default:t(()=>[a(C,null,{default:t(()=>[a(Z)]),_:1}),e[24]||(e[24]=d(" ‰øùÂ≠òÈÖçÁΩÆ ",-1))]),_:1},8,["loading"]),a(x,{onClick:E},{default:t(()=>[a(C,null,{default:t(()=>[a(D)]),_:1}),e[25]||(e[25]=d(" ÊÅ¢Â§çÈªòËÆ§ ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),ce=te(de,[["__scopeId","data-v-6c355bdb"]]);export{ce as default};
