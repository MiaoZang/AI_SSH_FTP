import{d as Q,k as c,c as B,D as Z,o as q,a as l,h as o,P as ee,b as t,F as M,p as h,x as _,m as z,Q as D,v as te,i as R,t as r,r as Y,E as m,_ as se}from"./index-x4DXS2Vx.js";const ae={class:"public-activation-page"},ne={class:"main-container"},le={key:0,class:"checking-status"},oe={key:1,class:"maintenance-page"},ie={class:"tabs-container"},ce={key:0,class:"input-section"},re={class:"input-row"},ue=["disabled"],de=["disabled"],ve={key:0},pe={key:1,class:"loader"},be={key:1,class:"input-section batch-section"},ye=["disabled"],he={class:"batch-config"},me=["disabled"],fe={key:0},ge={key:1,class:"loader"},ke={key:0,class:"batch-results"},_e={class:"results-summary"},Ce={class:"text-success"},Ae={class:"text-error"},we={class:"results-list"},xe={class:"result-key"},$e={key:0,class:"result-card"},Me={key:1,class:"result-error"},Ne=["onClick"],Te={class:"batch-actions"},ze=["disabled"],De={key:2,class:"loading-hint"},Ye={key:3,class:"result-section"},Fe={key:0},Se={key:1},Xe={key:0,class:"countdown-section"},Pe={key:1,class:"card-data-container"},Ve={class:"data-label"},Ie={class:"data-value"},Je=["onClick"],Le={class:"data-label"},Be={class:"data-value"},Re=["onClick"],Ee={key:2,class:"error-content"},je=Q({__name:"PublicActivation",setup(Oe){const g=c("single"),F=c(!1),S=c(!0),C=c(""),u=c(!1),x=c(!1),y=c(!1),N=c(""),v=c(null),i=c(null),T=c(""),k=c("-"),p=c([]),$=B(()=>p.value.filter(a=>a.success).length),X=B(()=>p.value.filter(a=>!a.success).length),A=c(null),f=c("");let d=null;const P=()=>{if(!A.value){f.value="";return}const a=new Date,s=new Date(A.value.getTime()+3600*1e3).getTime()-a.getTime();if(s<=0){f.value="å·²è¿‡æœŸ",d&&(clearInterval(d),d=null);return}const n=Math.floor(s/(1e3*60)),b=Math.floor(s%(1e3*60)/1e3);f.value=`${n}åˆ†${b}ç§’`},E=()=>{d&&clearInterval(d),P(),d=setInterval(P,1e3)};Z(()=>{d&&clearInterval(d)});const V=async()=>{try{const e=await(await fetch("/api/v1/card-pool/activation-status")).json();e.code===200&&e.data&&(F.value=e.data.activationMaintenance)}catch(a){console.error("æ£€æŸ¥ç»´æŠ¤çŠ¶æ€å¤±è´¥:",a)}finally{S.value=!1}};q(()=>{V()});const j=()=>{const a=["James","Mary","Robert","Patricia","John","Jennifer","Michael","Linda","William","Elizabeth","David","Barbara","Richard","Susan","Joseph","Jessica","Thomas","Sarah","Charles","Karen"],e=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Hernandez","Lopez","Gonzales","Wilson","Anderson","Thomas","Taylor","Moore","Jackson","Martin"],s=a[Math.floor(Math.random()*a.length)],n=e[Math.floor(Math.random()*e.length)];return`${s} ${n}`},I=()=>{const a=[{city:"New York",stateFull:"New York",stateAbbr:"NY",zip:"10001"},{city:"Los Angeles",stateFull:"California",stateAbbr:"CA",zip:"90001"},{city:"Chicago",stateFull:"Illinois",stateAbbr:"IL",zip:"60601"},{city:"Houston",stateFull:"Texas",stateAbbr:"TX",zip:"77001"},{city:"Phoenix",stateFull:"Arizona",stateAbbr:"AZ",zip:"85001"},{city:"Philadelphia",stateFull:"Pennsylvania",stateAbbr:"PA",zip:"19101"},{city:"San Antonio",stateFull:"Texas",stateAbbr:"TX",zip:"78201"},{city:"San Diego",stateFull:"California",stateAbbr:"CA",zip:"92101"},{city:"Dallas",stateFull:"Texas",stateAbbr:"TX",zip:"75201"},{city:"Denver",stateFull:"Colorado",stateAbbr:"CO",zip:"80201"}],e=["Main St","Oak Ave","Washington Blvd","Lakeview Dr","Parkway Dr","Lexington Ave","Broadway","Sunset Blvd","Lincoln Ave","Madison St"],s=a[Math.floor(Math.random()*a.length)],n=Math.floor(Math.random()*9e3)+100,b=e[Math.floor(Math.random()*e.length)];return{name:j(),street:`${n} ${b}`,city:s.city,stateFull:s.stateFull,stateAbbr:s.stateAbbr,zip:s.zip}},w=async a=>{try{await navigator.clipboard.writeText(a),m.success("å·²å¤åˆ¶")}catch{const e=document.createElement("textarea");e.value=a,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),m.success("å·²å¤åˆ¶")}},J=async()=>{if(!C.value.trim()){m.warning("è¯·è¾“å…¥å¡å¯†");return}u.value=!0,x.value=!1;try{const e=await(await fetch("/api/v1/card-keys/activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyCode:C.value.trim()})})).json();if(e.success&&e.card){y.value=!0;const s=n=>{if(!n)return"MM/YY";if(/^\d{2}\/\d{2}$/.test(n))return n;try{const b=new Date(n);if(isNaN(b.getTime()))return n;const G=String(b.getMonth()+1).padStart(2,"0"),H=String(b.getFullYear()).slice(-2);return`${G}/${H}`}catch{return n}};v.value={cardNumber:e.card.cardNumber||"****************",expiry:s(e.card.expiryDate),cvv:e.card.cvv||"***"},i.value=I(),e.activatedAt?A.value=new Date(e.activatedAt):A.value=new Date,E()}else y.value=!1,N.value=e.error||"æ¿€æ´»å¤±è´¥"}catch{y.value=!1,N.value="ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}finally{u.value=!1,x.value=!0}},L=()=>{C.value="",x.value=!1,v.value=null,i.value=null,A.value=null,f.value="",d&&(clearInterval(d),d=null)},O=async()=>{if(!v.value||!i.value)return;const a=`å¡å·: ${v.value.cardNumber}
æœ‰æ•ˆæœŸ: ${v.value.expiry}
CVV: ${v.value.cvv}
---
å§“å: ${i.value.name}
è¡—é“: ${i.value.street}
åŸå¸‚: ${i.value.city}
å·/çœ: ${i.value.stateFull} (${i.value.stateAbbr})
é‚®ç¼–: ${i.value.zip}`;await w(a)},K=()=>{i.value=I(),m.success("è´¦å•åœ°å€å·²é‡æ–°ç”Ÿæˆ")},U=async()=>{const a=T.value.split(`
`).map(e=>e.trim()).filter(e=>e.length>0);if(a.length===0){m.warning("è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªå¡å¯†");return}u.value=!0,p.value=[];for(const e of a)try{const n=await(await fetch("/api/v1/card-keys/activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyCode:e})})).json();n.success&&n.card?p.value.push({keyCode:e,success:!0,card:{cardNumber:n.card.cardNumber,expiryDate:n.card.expiryDate,cvv:n.card.cvv}}):p.value.push({keyCode:e,success:!1,error:n.error||"æ¿€æ´»å¤±è´¥"})}catch{p.value.push({keyCode:e,success:!1,error:"ç½‘ç»œé”™è¯¯"})}u.value=!1,$.value>0?m.success(`æ‰¹é‡æ¿€æ´»å®Œæˆï¼š${$.value} æˆåŠŸï¼Œ${X.value} å¤±è´¥`):m.error("å…¨éƒ¨æ¿€æ´»å¤±è´¥")},W=()=>{const a=p.value.filter(e=>e.success&&e.card).map(e=>`${e.card.cardNumber}${k.value}${e.card.expiryDate}${k.value}${e.card.cvv}`);if(a.length===0){m.warning("æ²¡æœ‰å¯å¤åˆ¶çš„æˆåŠŸè®°å½•");return}w(a.join(`
`))};return(a,e)=>(o(),l("div",ae,[e[19]||(e[19]=ee('<div class="bg-glow" data-v-46f6eb3e><div class="glow-orb" data-v-46f6eb3e></div><div class="glow-orb" data-v-46f6eb3e></div><div class="glow-orb" data-v-46f6eb3e></div></div><div class="bg-grid" data-v-46f6eb3e></div><div class="page-header" data-v-46f6eb3e><h1 data-v-46f6eb3e>ğŸ« å¡å¯†æ¿€æ´»</h1><p data-v-46f6eb3e>è¾“å…¥å¡å¯†ï¼Œæ¿€æ´»è·å–å¡ç‰‡ä¿¡æ¯</p></div>',3)),t("div",ne,[S.value?(o(),l("div",le,[...e[6]||(e[6]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"æ­£åœ¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€...",-1)])])):F.value?(o(),l("div",oe,[e[7]||(e[7]=t("div",{class:"maintenance-icon"},"ğŸ› ï¸",-1)),e[8]||(e[8]=t("h2",null,"ç³»ç»Ÿç»´æŠ¤ä¸­",-1)),e[9]||(e[9]=t("div",{class:"maintenance-content"},[t("p",null,"ä¸‡äº‹è¾¾å†æ¬¡ç»´æŠ¤ï¼å¤§å®¶ç¨å®‰å‹¿èº"),t("p",null,"å¡å¯†è¿‡æœŸç»™äºˆæ¢æ–° è¯·ç­‰å¾…ä¸€ä¼šä¸‡äº‹è¾¾ç»´æŠ¤å®Œæˆ å¯ä»¥ç»§ç»­ç»‘å®šå“¦ï¼"),t("p",null,"è€æ¿ä»¬ ä¸è¦æ€¥å“¦ ä¸è¦ä¹±æ‹"),t("p",null,"æ‰€æœ‰äººåº—é“ºå…¨éƒ¨æš‚åœ å› ä¸ºæ˜¯é“¶è¡Œç»´æŠ¤"),t("p",{class:"refresh-hint"},"è¯·ç­‰å¾…ç‰‡åˆ»åˆ·æ–°ç½‘é¡µ ç»´æŠ¤å¥½äº†æ­¤åŠŸèƒ½æ¢å¤æ­£å¸¸")],-1)),t("button",{class:"btn-refresh-page",onClick:V}," ğŸ”„ åˆ·æ–°çŠ¶æ€ ")])):(o(),l(M,{key:2},[t("div",ie,[t("button",{class:_(["tab-btn",g.value==="single"?"active":""]),onClick:e[0]||(e[0]=s=>g.value="single")},"å¸¸è§„æ¿€æ´»",2),t("button",{class:_(["tab-btn",g.value==="batch"?"active":""]),onClick:e[1]||(e[1]=s=>g.value="batch")},"æ‰¹é‡æ¿€æ´»",2)]),g.value==="single"?(o(),l("div",ce,[e[10]||(e[10]=t("div",{class:"section-title"},"è¯·è¾“å…¥å¡å¯†",-1)),t("div",re,[z(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>C.value=s),class:"coupon-input",placeholder:"è¯·è¾“å…¥å¡å¯†...",disabled:u.value,onKeyup:te(J,["enter"])},null,40,ue),[[D,C.value]]),t("button",{class:"btn-activate",disabled:u.value,onClick:J},[u.value?(o(),l("span",pe)):(o(),l("span",ve,"æ¿€æ´»"))],8,de)])])):h("",!0),g.value==="batch"?(o(),l("div",be,[e[14]||(e[14]=t("div",{class:"section-title"},"æ‰¹é‡å¡å¯†æ¿€æ´»ï¼ˆä¸€è¡Œä¸€ä¸ªï¼‰",-1)),z(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>T.value=s),class:"batch-textarea",placeholder:`è¯·è¾“å…¥å¡å¯†ï¼Œä¸€è¡Œä¸€ä¸ª...
AAA0-XXXX-XXXX-XXXX
AAA1-YYYY-YYYY-YYYY`,disabled:u.value,rows:"5"},null,8,ye),[[D,T.value]]),t("div",he,[e[11]||(e[11]=t("span",{class:"config-label"},"åˆ†éš”ç¬¦ï¼š",-1)),z(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>k.value=s),class:"delimiter-input"},null,512),[[D,k.value]]),t("button",{class:"btn-activate",disabled:u.value,onClick:U},[u.value?(o(),l("span",ge)):(o(),l("span",fe,"æ‰¹é‡æ¿€æ´»"))],8,me)]),p.value.length>0?(o(),l("div",ke,[t("div",_e,[e[12]||(e[12]=R(" å¤„ç†å®Œæˆï¼š",-1)),t("span",Ce,r($.value)+" æˆåŠŸ",1),e[13]||(e[13]=R("ï¼Œ ",-1)),t("span",Ae,r(X.value)+" å¤±è´¥",1)]),t("div",we,[(o(!0),l(M,null,Y(p.value,(s,n)=>(o(),l("div",{key:n,class:_(["result-item",s.success?"success":"error"])},[t("span",xe,r(s.keyCode),1),s.success?(o(),l("span",$e,r(s.card.cardNumber)+"|"+r(s.card.expiryDate)+"|"+r(s.card.cvv),1)):(o(),l("span",Me,r(s.error),1)),s.success?(o(),l("button",{key:2,class:"btn-copy",onClick:b=>w(`${s.card.cardNumber}${k.value}${s.card.expiryDate}${k.value}${s.card.cvv}`)},"å¤åˆ¶",8,Ne)):h("",!0)],2))),128))]),t("div",Te,[t("button",{class:"btn-copy-all",onClick:W,disabled:$.value===0},"ğŸ“‹ å¤åˆ¶å…¨éƒ¨æˆåŠŸ",8,ze),t("button",{class:"btn-reset",onClick:e[5]||(e[5]=s=>p.value=[])},"æ¸…ç©ºåˆ—è¡¨")])])):h("",!0)])):h("",!0),u.value?(o(),l("div",De,[...e[15]||(e[15]=[t("div",{class:"loading-spinner"},null,-1),t("p",{class:"loading-text"},"æ­£åœ¨æ¿€æ´»ï¼Œä¸ºäº†ç¡®ä¿ä¸€äººä¸€å¡ï¼Œæ­£åœ¨æ’é˜Ÿæ¿€æ´»ï¼Œæœ‰ç‚¹æ…¢ï¼Œè¯·ç¨å...",-1)])])):h("",!0),x.value?(o(),l("div",Ye,[t("div",{class:_(["result-box",y.value?"success":"error"])},[t("div",{class:_(["result-title",y.value?"success":"error"])},[y.value?(o(),l("span",Fe,"âœ… æ¿€æ´»æˆåŠŸ")):(o(),l("span",Se,"âŒ æ¿€æ´»å¤±è´¥"))],2),y.value&&f.value?(o(),l("div",Xe,[e[16]||(e[16]=t("span",{class:"countdown-label"},"â±ï¸ å¡å¯†æœ‰æ•ˆæœŸå‰©ä½™ï¼š",-1)),t("span",{class:_(["countdown-value",f.value==="å·²è¿‡æœŸ"?"expired":""])},r(f.value),3)])):h("",!0),y.value&&v.value?(o(),l("div",Pe,[(o(!0),l(M,null,Y({"å¡å·/Card number":v.value.cardNumber,"æœ‰æ•ˆæœŸ/Expiration (MM/YY)":v.value.expiry,"æ ¡éªŒç /å®‰å…¨ç /Security code/CVV":v.value.cvv},(s,n)=>(o(),l("div",{class:"data-item",key:n},[t("span",Ve,r(n),1),t("span",Ie,r(s),1),t("button",{class:"btn-copy",onClick:b=>w(s)},"å¤åˆ¶",8,Je)]))),128)),e[18]||(e[18]=t("div",{class:"divider"},null,-1)),t("div",{class:"section-subtitle-row"},[e[17]||(e[17]=t("span",{class:"section-subtitle"},"è´¦å•åœ°å€ (éšæœºç”Ÿæˆ)",-1)),t("button",{class:"btn-refresh",onClick:K},"ğŸ”„ é‡æ–°éšæœº")]),i.value?(o(!0),l(M,{key:0},Y({å§“å:i.value.name,è¡—é“:i.value.street,åŸå¸‚:i.value.city,"å·/çœ":i.value.stateFull,å·ç¼©å†™:i.value.stateAbbr,é‚®ç¼–:i.value.zip},(s,n)=>(o(),l("div",{class:"data-item",key:n},[t("span",Le,r(n),1),t("span",Be,r(s),1),t("button",{class:"btn-copy",onClick:b=>w(s)},"å¤åˆ¶",8,Re)]))),128)):h("",!0),t("div",{class:"action-row"},[t("button",{class:"btn-copy-all",onClick:O}," ğŸ“‹ ä¸€é”®å¤åˆ¶å…¨éƒ¨ "),t("button",{class:"btn-reset",onClick:L},"é‡æ–°æ¿€æ´»")])])):(o(),l("div",Ee,[t("p",null,r(N.value),1),t("button",{class:"btn-reset",onClick:L},"é‡è¯•")]))],2)])):h("",!0)],64))])]))}}),Ue=se(je,[["__scopeId","data-v-46f6eb3e"]]);export{Ue as default};
