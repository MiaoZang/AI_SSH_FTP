import{d as I,k as P,c as _,o as R,j as c,w as t,g as n,f as U,y as j,B as K,h as i,e as a,b as d,a as w,p as O,m as C,S as x,F as q,r as G,z as v,i as m,t as f,u as h,T as H,E as J,_ as Q}from"./index-x4DXS2Vx.js";import{u as X}from"./authStore-DMI7moDq.js";import"./auth-LOQg4seF.js";import"./index-j8vyhiJM.js";import"./index-B9ygI19o.js";const Y={class:"logo-text"},Z={key:0,class:"user-section"},ee={class:"user-info"},te=I({__name:"AdminLayout",setup(ae){const $=U(),y=j(),l=X(),u=P(!1),e=_(()=>K()),k=_(()=>[{path:`${e.value}`,icon:"Odometer",title:"仪表盘"},{path:`${e.value}/cards`,icon:"CreditCard",title:"卡片管理"},{path:`${e.value}/card-pool`,icon:"Box",title:"卡池管理"},{path:`${e.value}/card-keys`,icon:"Key",title:"卡密管理"},{path:`${e.value}/activation`,icon:"Ticket",title:"卡密激活"},{path:`${e.value}/agents`,icon:"Avatar",title:"代理管理"},{path:`${e.value}/airwallex`,icon:"Cloudy",title:"空中卡池"},{path:`${e.value}/logs`,icon:"Document",title:"操作日志"},{path:`${e.value}/users`,icon:"User",title:"用户管理"},{path:`${e.value}/settings`,icon:"Setting",title:"系统设置"}]),S=_(()=>{const o=y.path;return o.startsWith(`${e.value}/cards/`)?`${e.value}/cards`:o.startsWith(`${e.value}/card-pool`)?`${e.value}/card-pool`:o.startsWith(`${e.value}/card-keys`)?`${e.value}/card-keys`:o.startsWith(`${e.value}/agents`)?`${e.value}/agents`:o.startsWith(`${e.value}/logs`)?`${e.value}/logs`:o.startsWith(`${e.value}/users`)?`${e.value}/users`:o.startsWith(`${e.value}/settings`)?`${e.value}/settings`:o.startsWith(`${e.value}/activation`)?`${e.value}/activation`:o.startsWith(`${e.value}/airwallex`)?`${e.value}/airwallex`:`${e.value}`}),g=o=>{$.push(o)},W=async()=>{await l.logout(),J.success("已登出"),$.push(`${e.value}/login`)};return R(async()=>{l.token&&!l.user&&await l.fetchCurrentUser()}),(o,r)=>{const B=n("CreditCard"),p=n("el-icon"),A=n("el-menu-item"),N=n("el-menu"),T=n("el-avatar"),V=n("SwitchButton"),D=n("el-dropdown-item"),E=n("el-dropdown-menu"),L=n("el-dropdown"),z=n("el-aside"),F=n("router-view"),M=n("el-main"),b=n("el-container");return i(),c(b,{class:"app-container"},{default:t(()=>[a(z,{width:u.value?"64px":"220px",class:"app-aside"},{default:t(()=>[d("div",{class:"logo",onClick:r[0]||(r[0]=s=>g(e.value))},[a(p,{size:"28"},{default:t(()=>[a(B)]),_:1}),C(d("span",Y,"Virtual Card",512),[[x,!u.value]])]),a(N,{"default-active":S.value,collapse:u.value,class:"app-menu",onSelect:g},{default:t(()=>[(i(!0),w(q,null,G(k.value,s=>(i(),c(A,{key:s.path,index:s.path},{title:t(()=>[m(f(s.title),1)]),default:t(()=>[a(p,null,{default:t(()=>[(i(),c(v(s.icon)))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","collapse"]),h(l).user?(i(),w("div",Z,[a(L,{trigger:"click",onCommand:W},{dropdown:t(()=>[a(E,null,{default:t(()=>[a(D,null,{default:t(()=>[a(p,null,{default:t(()=>[a(V)]),_:1}),r[2]||(r[2]=m(" 登出 ",-1))]),_:1})]),_:1})]),default:t(()=>[d("div",ee,[a(T,{size:32},{default:t(()=>[m(f(h(l).user.displayName.charAt(0)),1)]),_:1}),C(d("span",{class:"user-name"},f(h(l).user.displayName),513),[[x,!u.value]])])]),_:1})])):O("",!0),d("div",{class:"collapse-btn",onClick:r[1]||(r[1]=s=>u.value=!u.value)},[a(p,null,{default:t(()=>[(i(),c(v(u.value?"Expand":"Fold")))]),_:1})])]),_:1},8,["width"]),a(M,{class:"app-main"},{default:t(()=>[a(F,null,{default:t(({Component:s})=>[a(H,{name:"fade",mode:"out-in"},{default:t(()=>[(i(),c(v(s)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),ie=Q(te,[["__scopeId","data-v-4c94713d"]]);export{ie as default};
