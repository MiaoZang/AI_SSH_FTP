我想构建一个 skills ，
用于提供给AI agent 使用，
主要功能是：
1. SSH 连接 {
    除去常规的SSH链接，
    还要支持免密码输入，
    还要让AI能获取命令执行后的结果返回。
}

2. FTP 连接{
    除去常规的FTP链接，
    还要支持免密码输入，
    还要让AI能获取命令执行后的结果返回。
}
想用GO之类的编写一个二进制，
运行在服务器，
AI通过接口去链接调用，
这种方式区别与正常的SSH和FTP，
AI可以获取到命令执行后的结果返回，
以及没有了很多限制。
先理解总结下这个方案，
看看有没有什么建议。
总结到 总结.md


我看了下总结，
1. {
    首先是安全性，
    最后这个项目，还会需要一个sh脚本，去一键启停go程序，
    这个项目的运用场景是临时测试调试，所以不需要考虑安全性。
}
2. {
    ssh 的重点在于：
    POST   /api/ssh/exec       - 执行命令
    这里要考虑到  部分复杂的命令接口，
    所以建议收发的时候，
    用编码进行处理，
    这样传输和接收的时候都能确保最后命令的准确性。
    FTP 应该也是同理。
}
3. {
    不止局限于 HTTP 通讯，
    像WS这种高性能通讯也是可以增加的，
    这样可以让这个项目适用于不同的情况下。
}
根据上面的几点，更新 总结.md







📋 待确认细节清单
1. 服务器配置
Q1: 目标SSH/FTP服务器数量？
单个服务器

Q2: 服务器凭据存储方式？
选项C：两者都支持（配置文件为主，环境变量覆盖）

Q3: SSH认证方式？
选项C：同时支持密码和密钥（配置文件中二选一）

2. 端口与IP绑定
Q4: HTTP服务端口？
48891

Q5: WebSocket服务端口？
48892

Q6: 绑定IP地址？
0.0.0.0

3. 功能优先级
Q7: MVP第一版功能范围？
分段式逐步完善所有功能

Q8: 文件传输功能优先级？
分段式逐步完善所有功能

Q9: WebSocket是否在第一版实现？
分段式逐步完善所有功能

4. 编码策略
Q10: Base64编码是否强制？
强制使用吧，避免有一些命令太奇怪

Q11: 错误信息是否Base64编码？
是




服务器SSH
111.92.242.223
root
ScMKaxqw8cj5

服务器没有FTP，
用刚刚部署的AI_SSH_FTP，
链接服务器，
部署FTP。



服务器FTP





1. {
    修复：（注：最后一步 netstat 失败是因为命令不存在，但 systemctl 显示服务已启动）
}
2. {
    根据之前提出的需求，检测当前项目是否都完成了
}



1. 没有看到  ssh_ftp_proxy_v1.0.zip
2. 我需要封装成一个skills


.agent  这个文件夹里面有一个skills  ，
是我从  https://skillsmp.com/ 上下载的，
里面有一个  ssh  的 skills，
可以参考这个skills，
将我们这个项目封装一下


将三个sh脚本，封装成一个sh脚本，
这个sh脚本需要注意一些点：
1. 检测依赖并安装
2. 检查 config.yaml 是否存在，自动创建，让用户输入配置
3. 具体功能提供一个清单，供用户选择


清单选择增加一层  中英文选择

我打算将这个项目放到我自己的 仓库
https://github.com/MiaoZang/AI_SSH_FTP.git
MiaoZang
UYgBDm2ff%!T
用户名和密码
sh脚本再次修改下，
会检测是否有  ssh-ftp-proxy  ，如果没有从仓库下载
sh最好还要兼容下别的linx系统(太麻烦就不用了)



再次深入的检查一下当前项目，在各种情况下是否能完美的完成需求。
以及有什么新的漏洞或者意见提出来。


1. SSH 连接竞态条件
关于这个我没记错的话是可以。同一个程序，但是多个同时运行。每个程序都有自己的pid，
是否可以拆分成子母程序？
母程序接收到链接请求之后，调用子程序去进行后续对接。
每一个子程序呢，对应一个链接。
这样的话，是否可以解决这个问题？

2. WebSocket Goroutine 泄漏
我没记错的话，WebSocket貌似是可以一个端口，多个路径链接。
搭配上面的子母程序的方案是否可以解决？

3. FTP 无连接池
实现连接池或保持单一长连接。
搭配上面的子母程序的方案，子程序长时间运行。除非超过一个小时没有接收到任何命令。
是否可以解决？

4. 无请求超时控制
添加 Context 超时

5. 无优雅关闭
实现信号处理和优雅关闭。

6. WebSocket 错误消息未 Base64 编码
进行Base64编码

goroutine 和 子母程序的方案对比

子母程序的方案  除了go语言，还有什么其他语言是比较推荐的？给我一个对比。

C 和 C++ 对比

我决定啦。用C++来重构整个项目。




测试服务器

美国大宽带 B型
Ubuntu-24.04.1-x64
23.159.8.47
4306
root
2AlBZHq9xSFC

xui.miaozang.vip

宝塔
http://23.159.8.47:24276/9db9c8c7
jjc04xa2
7bb4bd5c


测试目录
/www/wwwroot/test

测试上传
test\dist

需要用我们当前项目来测试上传

